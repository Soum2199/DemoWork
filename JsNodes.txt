const Express = require("express")
const EJS = require("ejs")

const EXPRESSSESSION = require("express-session")
const CSURF = require("csurf")
const app = Express()
app.set("view engine", EJS)
app.use(Express.urlencoded())

app.use(EXPRESSSESSION({
    secret: "javascript",
    cookie: { secure: false }
}))

// http://localhost:9000
// https://www.facebook.com

// https:
// http:

const csrfProtection = CSURF()
app.use(csrfProtection)



app.get("/transaction", function(req, res)
{
    // Generate the csrf token
    res.render("transaction.ejs", { token: req.csrfToken() } )
})

app.post("/transaction", function(req, res)
{
    const transactionData = req.body
    res.send("<h2>Transaction is successfull!")
})

app.listen(9000, function()
{
    console.log("Server is running on the port 9000!")
})


function showTime() {
	document.getElementById('currentTime').innerHTML = new Date().toUTCString();
}
showTime();
setInterval(function () {
	showTime();
}, 1000);


// app.get("/page/:pageno", async function(req, res){
//   const personDetails = await Person.find();
//   res.json({"details": personDetails})
  
  
//   const recievedPageno = req.params.pageno;
//   const personDetails = await Person.find().skip((recievedPageno - 1)*2).limit(2);
//   res.json({"details": personDetails})
// })

//Normal solely written code
/**
 * @param {number} n
 * @returns {number}
 */

class Solution {
    floorSqrt(n) {
        // code here
        // return Math.sqrt(Math.ceil(n));
        return Math.floor(Math.sqrt(n))
    }
}

a = [1,2,3,4]
// a.append(6)
a.push(6)
console.log(a)
// a.remove()
a.pop()
console.log(a)
a.shift()
console.log(a)
